import{_ as me,a as ue,b as ye,c as ge,d as fe,e as be,f as Le,V as Me,g as ke,T as De,X as Te,i as We,S as Be,O as ee,m as te,M as ae,h as Q,j as Ae,k as Oe,l as Ee,n as Pe,o as Ve,p as je,q as ze,F as Fe,P as Re,r as qe,I as Ze,s as Ge}from"./logo-74b6f2f2.js";import{_ as he,r as _e,o as L,c as S,a as c,w as Y,f as I,g as de,h as Je,n as oe,i as ce,j as M,m as z,k as Qe,l as Ye,q as pe,u as He}from"./index-b9e6894c.js";import{$ as ne}from"./jquery-6f006691.js";const Ue="/assets/2D-m-39d687b0.svg",Xe="/assets/3D-m-761d0803.svg",Ke="/assets/vector-m-24d7cfae.svg",$e="/assets/selectVector-m-28d458ac.svg",et="/assets/singleWindow-m-dfbe8cc5.svg",tt="/assets/doubleWindow-m-c2add8a0.svg";const at={props:{currentLayers:{type:Array,default:[]},mapCount:{type:Number,default:1},dimensionMapStatus:{type:Boolean,default:!1},openConditionWrap:{type:Function,default:()=>{}},openLayerSelect:{type:Function,default:()=>{}},onLayerControl:{type:Function,default:()=>{}},onChangeMapCount:{type:Function,default:()=>{}},onChangeDimensionMap:{type:Function,default:()=>{}}},setup(T,{emit:d}){const m=_e({toolSwitch:{threeDimensionalBtn:!1,layerConditionBtn:!1,splitWindowBtn:!1},targetNum:1});function t(g,W){Object.keys(m.toolSwitch).forEach(B=>{B===g?m.toolSwitch[g]?m.toolSwitch[g]=!1:m.toolSwitch[g]=!0:m.toolSwitch[B]=!1})}function e(g,W){g==="changeMapCount"&&(m.toolSwitch.splitWindowBtn=!1),T.onLayerControl({action:g,value:W})}function y(){d("conditionWrap")}return{props:T,state:m,toolSwitch:t,onLayerControl:e,conditionWrap:y}}},ot={class:"w-100"},nt={class:"list-unstyled d-flex align-items-center justify-content-around h-100 flex-nowrap w-100 bg-white mb-0"},rt=c("img",{src:Ue},null,-1),st=[rt],it=c("img",{src:Xe},null,-1),lt=[it],dt=c("img",{src:Ke},null,-1),ct=[dt],pt=c("img",{src:$e},null,-1),mt=[pt],ut={class:"text-white"},yt=c("img",{src:et},null,-1),gt=[yt],ft=c("img",{src:tt},null,-1),bt=[ft];function Lt(T,d,m,t,e,y){return L(),S("div",ot,[c("ul",nt,[c("li",null,[c("div",null,[t.props.dimensionMapStatus?(L(),S("div",{key:0,class:"navbarBtn",onClick:d[0]||(d[0]=Y(g=>(t.toolSwitch("threeDimensionalBtn"),t.props.onChangeDimensionMap("3D")),["prevent"]))},st)):(L(),S("div",{key:1,class:"navbarBtn",onClick:d[1]||(d[1]=Y(g=>(t.toolSwitch("threeDimensionalBtn"),t.props.onChangeDimensionMap("2D")),["prevent"]))},lt))])]),c("li",null,[c("div",{class:"navbarBtn",onClick:d[2]||(d[2]=g=>t.props.openConditionWrap())},ct)]),c("li",null,[c("div",{class:"navbarBtn",onClick:d[3]||(d[3]=g=>t.props.openLayerSelect())},mt)]),c("li",null,[c("div",ut,[t.props.mapCount===1?(L(),S("div",{key:0,class:"navbarBtn",onClick:d[4]||(d[4]=Y(g=>t.props.onChangeMapCount(2),["prevent"]))},gt)):I("",!0),t.props.mapCount===2?(L(),S("div",{key:1,class:"navbarBtn",onClick:d[5]||(d[5]=Y(g=>t.props.onChangeMapCount(1),["prevent"]))},bt)):I("",!0)])])])])}const Ce=he(at,[["render",Lt]]);const ht={components:{AreaData:me,MNavbar:Ce,LayerSelector:ue,OverLayer:ye,Condition:ge,SearchBar:fe,MapSourceOption:be,AsideTool:Le},props:{},setup(T,{emit:d}){const m=te,t=He(),e=_e({defaultCenter:[121.326776,24.655499],defaultCenterZoom:14,targetNum:1,conditionWrap:!1,layerSelect:!1,currentLayers:[],layers:[],mapLayers:de(()=>e.layers.map((n,a)=>({label:n.group_title,value:n.value,layers:n.group_layers,groupClass:n.group_class}))),selectLock:!1,mapCount:1,map1:null,map2:null,map1LayerStatus:[],map2LayerStatus:[],temp:{map1BaseStatus:0,map2BaseStatus:0},deleteLightbox:!1,dimensionMap:{map1:"2D",map2:"2D"},toSearchDimensionStatus:de(()=>{const n=e.targetNum===1?"map1":"map2";return e.dimensionMap[n]==="2D"}),selectValueTemp:0,popup:{nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""},comSize:{wrapHeight:"",wrapWidth:""},tribeQuery:{}});let y=null;Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NzM3MWFhYS0xMjNlLTQ3MTMtODFjZS0xZjMzM2I5NGZiYTEiLCJpZCI6MTMwODE4LCJpYXQiOjE2ODQwNzM3Mjl9.UYu4kBialPo19dcvosHzZTpg2BD1zkFQnjCD78YiiYo";const g=new Me({projection:"EPSG:4326",center:e.defaultCenter,zoom:e.defaultCenterZoom,minZoom:4,maxZoom:16});function W(){e.map1=new ae({target:"map1",layers:[Q.getBaseMapData(0)],view:g,controls:[]}),e.map1.addControl(new Ve({units:"metric"}))}function B(n,a){const s=new je({source:new ze({features:[new Fe({geometry:new Re([n,a]),population:4e3,rainfall:500})]}),style:new qe({image:new Ze({anchor:[.5,100],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Ge})})}),i=e.targetNum===1?"map1":"map2";e[i].addLayer(s)}function P({action:n,value:a}){var l;const s=((l=e.map1)==null?void 0:l.getTarget())==null?"map2":"map1",i=e[s].getView();switch(n){case"In":i.animate({zoom:i.getZoom()+1});break;case"Out":i.animate({zoom:i.getZoom()-1});break;case"toNorth":i.animate({rotation:0});break;case"moveTo":if(a){const{xAxis:u,yAxis:w}=a;i.animate({center:[u,w],zoom:17,duration:100})}else navigator.geolocation.getCurrentPosition(function(u){i.animate({center:[u.coords.longitude,u.coords.latitude],zoom:17,duration:100}),B(u.coords.longitude,u.coords.latitude)});break;case"fullScreen":const o=document.getElementById(`map${e.targetNum}`);o.requestFullscreen?o.requestFullscreen():o.msRequestFullscreen?o.msRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen();break}}function N({action:n,value:a}){var l,o,u,w,A,O,G,J,ie;const s=e.targetNum==1?e.map1:e.map2,i=s==null?void 0:s.getLayers();switch(n){case"layerMode":if(a.checked){let f=a.nestedSubNodeIndex,E=e.layers[a.nodeIndex].group_layers[a.subNodeIndex].single_tiles,h=!We(e.layers[a.nodeIndex].group_layers[a.subNodeIndex].info_box);if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){if(!E||h){const _=y.getCesiumScene(),C=_.imageryLayers.length;for(let D=0;D<C;D++){let b=_.imageryLayers.get(D),v=(o=(l=b==null?void 0:b.imageryProvider._resource)==null?void 0:l.queryParameters)==null?void 0:o.id;const j=(u=m.getLayerIndex(v))==null?void 0:u.nodeIndex,$=(w=m.getLayerIndex(v))==null?void 0:w.subNodeIndex;a.nodeIndex==j&&a.subNodeIndex==$&&_.imageryLayers.remove(b)}f=e.selectValueTemp,a.id=m.resetLayerId(a.id,"nestedSubNode",e.selectValueTemp)}const x=m.get3DLayer(e.layers[a.nodeIndex].group_layers[a.subNodeIndex],f,a.id);y.getCesiumScene().imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(x))}else{(!E||h)&&(i.getArray().forEach(C=>{C.get("id")&&C.get("id").includes(`node${a.nodeIndex}_subNode${a.subNodeIndex}_nestedSubNode`)&&s.removeLayer(C)}),f=e.selectValueTemp,a.id=m.resetLayerId(a.id,"nestedSubNode",e.selectValueTemp));let x=m.getLayer(e.layers[a.nodeIndex].group_layers[a.subNodeIndex],f,a.id);if(s.addLayer(x),["雷達回波預測","累積雨量預測","氣溫預測"].includes(x.get("label"))){const{currentLayerKey:_,tilesImageUrls:C,imageExtent:D}=x.get("ext"),b=a.id.split("_nestedSubNode")[0];((A=e.temp)==null?void 0:A[`${b}count`])===void 0&&(e.temp[`${b}count`]=_),e.temp[b]=setInterval(function(){e.temp[`${b}count`]=e.temp[`${b}count`]+1>4?0:e.temp[`${b}count`]+1;let v=new Be({url:C[e.temp[`${b}count`]],projection:"EPSG:4326",imageExtent:D,interpolate:!0});x.setSource(v)},1e3)}["新竹縣原住民部落範圍","近年歷史災害82處部落點位","雨量站","工程鑽探","土石流潛勢溪流","落石分布"].includes(x.get("label"))&&(re(s,x.label),se(a,x.get("label")))}p("add",s.getTarget(),a.id)}else{if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){const{id:f,nestedSubNodeIndex:E,nodeIndex:h,subNodeIndex:x}=a;let _=e.layers[h].group_layers[x];const C=y.getCesiumScene(),D=C.imageryLayers.length;for(let b=0;b<D;b++){let v=C.imageryLayers.get(b);const j=(G=(O=v==null?void 0:v.imageryProvider._resource)==null?void 0:O.queryParameters)==null?void 0:G.id,$=(J=m.getLayerIndex(j))==null?void 0:J.nodeIndex,ve=(ie=m.getLayerIndex(j))==null?void 0:ie.subNodeIndex;(_.title===j||h==$&&x==ve)&&C.imageryLayers.remove(v)}}else{let E=function(){const h=a.id.split("_nestedSubNode")[0];f.filter(_=>{var C;return(C=_==null?void 0:_.get("id"))==null?void 0:C.includes(h)}).forEach(_=>{s.removeLayer(_)})},f=i.getArray();if(E(),e.layers[a.nodeIndex].group_layers[a.subNodeIndex].layer_type==="WFS"&&(se(a),e.popup.popupId=0,e.popup.popupData="",e.popup.overlay&&(s.removeOverlay(e.popup.overlay),e.popup.overlay=null)),["雷達回波預測","累積雨量預測","氣溫預測"].includes(e.layers[a.nodeIndex].group_layers[a.subNodeIndex].title)){const h=a.id.split("_nestedSubNode")[0];clearInterval(e.temp[h]),delete e.temp[`${h}count`]}}p("delete",s.getTarget(),a.id)}break;case"selectLayerMode":if(e.selectLock)return;a.layerName==="all"?i.getArray().filter(h=>h.get("id")!==void 0).forEach(h=>{N({action:"layerMode",value:{checked:!1,...m.getLayerIndex(h.get("id"))}})}):N({action:"layerMode",value:{checked:!1,...m.getLayerIndex(a.id)}});break;case"changeOrder":if(e.selectLock)return;const{nodeIndex:U,subNodeIndex:X,nestedSubNodeIndex:K}=m.getLayerIndex(a.id),le=m.getLayer(e.layers[U].group_layers[X],K,a.id);if(a.movement==="up"){if(a.key+1===i.getArray().length)return;const f={checked:!1,nodeIndex:U,subNodeIndex:X,nestedSubNodeIndex:K,id:a.id};N({action:"layerMode",value:f}),i.insertAt(a.key+1,le)}if(a.movement==="down"){if(a.key-1===0)return;const f={checked:!1,nodeIndex:U,subNodeIndex:X,nestedSubNodeIndex:K,id:a.id};N({action:"layerMode",value:f}),i.insertAt(a.key-1,le)}break;case"baseMap":e.temp[`map${e.targetNum}BaseStatus`]=a.baseId;const Ie=new De({preload:1/0,name:a.name,label:a.label,type:a.mapType,baseId:a.baseId,source:new Te({url:a.url}),crossOrigin:"anonymous"}),Ne=s==null?void 0:s.getLayers().getArray();i.insertAt(0,Ie),Ne.forEach(f=>(f.get("type")==="base"&&f.get("baseId")!==a.baseId&&s.removeLayer(f),!0));break;case"setOpacity":V(a.key,a.value);break}k()}function k(){var n,a,s;if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){e.currentLayers=[];const i=y.getCesiumScene(),l=i.imageryLayers.length;for(let o=0;o<l;o++){let w=i.imageryLayers.get(o).imageryProvider;w instanceof Cesium.WebMapServiceImageryProvider&&e.currentLayers.push({label:(n=w._resource)==null?void 0:n.queryParameters.layers_name,id:(a=w._resource)==null?void 0:a.queryParameters.id,visible:1})}}else{const i=e.targetNum==1?e.map1:e.map2,l=(s=i==null?void 0:i.getLayers())==null?void 0:s.getArray();e.currentLayers=l==null?void 0:l.map(o=>({label:o.get("label"),id:o.get("id"),visible:o.getVisible()}))}}function H(n){const a=e.targetNum===1?e.map1:e.map2,s=a==null?void 0:a.getLayers(),i=e.targetNum===1?"map1":"map2";if(e.dimensionMap[i]=n,n==="3D"){const o=s.getArray().find(u=>u.get("label").includes("近年歷史災害82處部落點位"));o&&e[`map${e.targetNum}`].removeLayer(o),F(!0),e[`${i}LayerStatus`].push("3D")}else F(!1),e[`${i}LayerStatus`]=e[`${i}LayerStatus`].filter(l=>l!=="3D"),e[`map${e.targetNum}LayerStatus`].forEach(l=>{const{nodeIndex:o,subNodeIndex:u,nestedSubNodeIndex:w}=m.getLayerIndex(l);return m.getLayer(e.layers[o].group_layers[u],w,n.id).get("label").includes("近年歷史災害82處部落點位")&&N({action:"layerMode",value:{checked:!0,nodeIndex:o,subNodeIndex:u,nestedSubNodeIndex:w,id:l}}),l})}function F(n){const a=e.targetNum===1?e.map1:e.map2;if(n){y=new ee({map:a,time(){return Cesium.JulianDate.now()},sceneOptions:{mapProjection:new Cesium.WebMercatorProjection}}),y.setEnabled(!0);const s=y.getCesiumScene();s.terrainProvider=Cesium.createWorldTerrain({}),y.setEnabled(!0)}else y.setEnabled(!1)}function R(n){const a=e.targetNum===1?e.map1:e.map2,s=a==null?void 0:a.getLayers();if(e.selectLock)return;const i=!s.getArray()[n].getVisible();s.getArray()[n].setVisible(i),oe(()=>{k()})}function V(n,a){const s=e.targetNum===1?e.map1:e.map2;(s==null?void 0:s.getLayers()).getArray()[n].setOpacity(Number(a))}function q(n){var l;if(e.mapCount===n)return;const a=e.targetNum!==1?"map1":"map2";e.mapCount=n;const i=e[`${a}LayerStatus`].filter(o=>o!=="3D").map(o=>te.getLayerIndex(o));if(n===2&&(e[a]=new ae({target:a,layers:[Q.getBaseMapData(0),...i.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:g,controls:[]}),((l=e[`${a}LayerStatus`])==null?void 0:l.indexOf("3D"))!==-1)){y=new ee({map:e[a],time(){return Cesium.JulianDate.now()}}),y.setEnabled(!0);const o=y.getCesiumScene({});o.terrainProvider=Cesium.createWorldTerrain({})}if(n===1){e[a]=null;const o=document.getElementById(a);for(;o.firstChild;)o.removeChild(o.firstChild)}}function Z(n){var s;e.targetNum=n;const a=e.targetNum!==1?"map1":"map2";if(e.mapCount===1){if(!e[`map${n}`]){let i=e[`map${n}LayerStatus`].filter(o=>o!=="3D");i.includes("node0_subNode4_nestedSubNodeundefined")&&(i=[...i.filter(u=>u!=="node0_subNode4_nestedSubNodeundefined"),"node0_subNode4_nestedSubNodeundefined"]);const l=i.map(o=>te.getLayerIndex(o));e[`map${n}`]=new ae({target:`map${n}`,layers:[Q.getBaseMapData(e.temp[`map${e.targetNum}BaseStatus`]),...l.map(o=>m.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:g,controls:[]}),re(e[`map${n}`]),((s=e[`map${n}LayerStatus`])==null?void 0:s.indexOf("3D"))!==-1&&(y=new ee({map:e[`map${n}`],time(){return Cesium.JulianDate.now()}}),y.setEnabled(!0))}if(e[a]){e[a]=null;const i=document.getElementById(a);for(;i.firstChild;)i.removeChild(i.firstChild)}}oe(()=>{k()})}function r(){e.conditionWrap=!e.conditionWrap}function p(n,a,s){if(n==="add")e[`${a}LayerStatus`].push(s);else if(n==="delete"){const i=e[`${a}LayerStatus`].findIndex(l=>l===s);e[`${a}LayerStatus`].splice(i,1)}else console.log("error")}function re(n){var s;const a=new Ae({layers:(s=n==null?void 0:n.getLayers())==null?void 0:s.getArray(),condition:Oe});n.addInteraction(a),a.on("select",i=>{const l=i.selected[0];if(l){e.popup.overlay=new Ee({element:e.popup.nodeRef,autoPan:!0,autoPanAnimation:{duration:250}}),e.popup.overlay.setPosition(i.mapBrowserEvent.coordinate),n.addOverlay(e.popup.overlay);const o=(l.getId()??l.getGeometryName()).split(".");if(e.popup.popupData=o[0],e.popup.coordinate=i.mapBrowserEvent.coordinate,o[0]==="新竹縣原住民部落範圍"){e.popup.popupId=l.get("編號");return}if(o[0]==="近年歷史災害82處部落點位"){e.popup.popupId=o[1];return}if(o[0]==="雨量站"){e.popup.popupId=l.get("Name");return}if(o[0]==="工程鑽探"){console.log("選到工程鑽探"),e.popup.popupId=l.get("name").split("_")[0];return}if(o[0]==="土石流潛勢溪流"){e.popup.popupId=l.get("ID"),e.popup.temp=l;return}o[0]==="落石分布"&&(e.popup.popupId=l.get("DATA_ID"),e.popup.temp=l)}else n.removeOverlay(e.popup.overlay),e.popup.overlay=null,e.popup={nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""}})}function Se(){(e.targetNum===1?e.map1:e.map2).removeOverlay(e.popup.overlay),e.popup.overlay=null}function se(n,a){const{checked:s,id:i}=n;if(!s){e.selectLayerOption={};return}a==="新竹縣原住民部落範圍"&&ne.ajax({url:"https://blueprint.indigenoustribe.tw/api/tribeQuery",method:"GET",success:l=>{e.tribeQuery=l},error:l=>{console.log(l)}})}function we(n){const a={action:"moveTo",value:{xAxis:n.WGS84.lng,yAxis:n.WGS84.lat}};P(a)}Je(async()=>{const n=ne.ajax({url:"https://blueprint.indigenoustribe.tw/api/underLayers",method:"GET"}).done(s=>s),a=ne.ajax({url:"https://blueprint.indigenoustribe.tw/api/layers",method:"GET"}).done(s=>s);Promise.all([n,a]).then(s=>{let i=s[0].data.map((l,o)=>({mapType:"base",baseId:o,onCurrent:!1,...l}));Q.setBaseMapData(i),e.temp.map1BaseStatus=0,e.temp.baseMapList=ke(),e.layers=s[1].map((l,o)=>(l.group_layers.forEach((u,w)=>{const A=w;let O;u.id=`node${o}_subNode${A}_nestedSubNode${O}`,u.single_tiles||u.tiles_list.forEach((G,J)=>{O=J,G.id=`node${o}_subNode${A}_nestedSubNode${O}`})}),{...l,value:o})),oe(()=>{W(),k()})}),e.comSize.wrapHeight=window.innerHeight,e.comSize.wrapWidth=window.innerWidth,t.dispatch("updateWindowWidth",window.innerWidth),window.onresize=s=>{e.comSize.wrapHeight=s.target.innerHeight,e.comSize.wrapWidth=s.target.innerWidth,t.dispatch("updateWindowWidth",window.innerWidth)}});function xe(){var n=new Cesium.WebMapServiceImageryProvider({url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FloodingPoint1721/MapServer/WMSServer",layers:"0",parameters:{FORMAT:"image/png",VERSION:"1.1.1",TRANSPARENT:!0,STYLES:""}}),a=new Cesium.ImageryLayer(n,{show:!0});y.imageryLayers.addImageryProvider(a)}return{state:e,props:T,store:t,mapControl:P,layerControl:N,onChangeLayerVisible:R,onChangeLayerOpacity:V,changeTarget:Z,conditionWrap:r,closeAreaData:Se,moveToMap:we,changeMapCount:q,onChangeDimensionMap:H,show:xe}}},_t={class:"w-100 d-flex justify-content-between flex-sm-row flex-wrap flex-sm-nowrap mapWrap",id:"mapWrap"},Ct={key:0,class:"middleLine"},St={class:"SearchBar d-block d-sm-block position-fixed w-100 w-sm-auto position-sm-absolute p-3 p-sm-0"},wt={class:"d-flex align-items-center justify-content-between justify-content-sm-start"},xt=c("img",{src:Pe,alt:"",class:"logo col-5 col-sm-auto me-0 me-sm-5"},null,-1),It={class:"conditionCom d-none d-sm-block position-absolute"},Nt={class:"mb-4"},vt={key:1,class:"mb-4"},Mt={key:1},kt={class:"m-Navbar d-flex d-sm-none position-relative w-100"},Dt={class:"position-absolute bottom-100 w-100",style:{"max-height":"70vh","overflow-y":"scroll"}},Tt={key:0},Wt={key:0,class:"lightWrap w-100 h-100 d-flex justify-content-center align-items-center"},Bt={class:"p-4 rounded bg-white",style:{width:"250px"}},At=c("p",{class:"text-center fw-bold"},"是否要取消全部圖層",-1),Ot={class:"d-flex justify-content-around"};function Et(T,d,m,t,e,y){var R,V,q,Z;const g=Le,W=be,B=fe,P=ge,N=ye,k=ue,H=Ce,F=me;return L(),S("div",null,[c("div",_t,[c("div",{id:"map1",class:ce({"w-100":((R=t.state.map1)==null?void 0:R.getTarget())=="map1","h-100":t.state.mapCount===1,"h-50":t.state.mapCount===2&&t.state.comSize.wrapWidth<600,middleMap:(V=t.state.map1)==null?void 0:V.getTarget()})},null,2),t.state.mapCount===2?(L(),S("div",Ct)):I("",!0),c("div",{id:"map2",class:ce({"w-100":((q=t.state.map2)==null?void 0:q.getTarget())==="map2","h-100":t.state.mapCount===1,"h-50":t.state.mapCount===2&&t.state.comSize.wrapWidth<600,middleMap:(Z=t.state.map2)==null?void 0:Z.getTarget()})},null,2)]),M(g,{class:"asideTool position-absolute top-50 translate-middle-y",id:"asideTool",onChangeTarget:r=>{t.changeTarget(r)},onOnMapControl:d[0]||(d[0]=({action:r,value:p})=>{t.mapControl({action:r,value:p})})},null,8,["onChangeTarget"]),c("div",St,[c("div",wt,[xt,M(W,{class:"mapSourceOption col-5 col-sm-auto d-block d-sm-block",baseMapList:t.state.temp.baseMapList,onChangeBaseMaps:({action:r,value:p})=>{t.layerControl({action:r,value:p})}},null,8,["baseMapList","onChangeBaseMaps"])]),M(B,z({class:"mt-4 d-none d-sm-block"},{dimensionMapStatus:t.state.toSearchDimensionStatus,currentLayers:t.state.currentLayers,mapCount:t.state.mapCount,onChangeBaseMaps:({action:r,value:p})=>{t.layerControl({action:r,value:p})},onChangeMapCount:r=>{t.changeMapCount(r)}},{onChangeTarget:r=>{t.changeTarget(r)},onOnLayerControl:d[1]||(d[1]=({action:r,value:p})=>{t.layerControl({action:r,value:p})}),onConditionWrap:d[2]||(d[2]=r=>{t.conditionWrap(r)}),onChangeDimensionMap:r=>{t.onChangeDimensionMap(r)}}),null,16,["onChangeTarget","onChangeDimensionMap"])]),c("div",It,[c("div",Nt,[t.state.conditionWrap?I("",!0):(L(),S("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:d[3]||(d[3]=r=>t.state.conditionWrap=!0)}," 圖層選項 ")),t.state.conditionWrap?(L(),S("div",vt,[M(P,z({tribeQuery:t.state.tribeQuery,mapLayers:t.state.mapLayers,currentLayers:t.state.currentLayers,onClose:()=>{t.state.conditionWrap=!1},showSelectLayerValue:r=>{t.state.selectValueTemp=r},moveToMap:r=>{t.moveToMap(r)}},{onOnLayerControl:d[4]||(d[4]=({action:r,value:p})=>{t.layerControl({action:r,value:p})})}),null,16)])):I("",!0),M(N,{text:"可選擇要加入的圖層",styles:"right: 105%;top: 0;text-align: right;"})]),c("div",null,[t.state.layerSelect?I("",!0):(L(),S("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:d[5]||(d[5]=r=>t.state.layerSelect=!0)}," 已選擇的圖層 ")),t.state.layerSelect?(L(),S("div",Mt,[M(k,Qe(Ye({selectLock:t.state.selectLock,currentLayers:t.state.currentLayers,onClose:()=>{t.state.layerSelect=!1},onLockLayer:()=>{t.state.selectLock=!t.state.selectLock},onDeleteLayer:({action:r,value:p})=>{p.layerName==="all"?t.state.deleteLightbox=!0:t.layerControl({action:r,value:p})},onLayerControl:({action:r,value:p})=>{t.layerControl({action:r,value:p})},onChangeLayerVisible:r=>{t.onChangeLayerVisible(r)},onChangeLayerOpacity:(r,p)=>{t.onChangeLayerOpacity(r,p)}})),null,16)])):I("",!0),M(N,{text:"顯示已經選擇的圖層",styles:"right: 105%;top: 0;text-align: right;"})])]),c("div",kt,[c("div",Dt,[t.state.conditionWrap?(L(),pe(P,z({key:0,class:"w-100"},{mapLayers:t.state.mapLayers,currentLayers:t.state.currentLayers,onClose:()=>{t.state.conditionWrap=!1},showSelectLayerValue:r=>{t.state.selectValueTemp=r}},{onOnLayerControl:d[6]||(d[6]=({action:r,value:p})=>{t.layerControl({action:r,value:p})})}),null,16)):I("",!0)]),t.state.layerSelect?(L(),S("div",Tt,[M(k,z({class:"position-absolute bottom-100 w-100"},{selectLock:t.state.selectLock,currentLayers:t.state.currentLayers,onClose:()=>{t.state.layerSelect=!1},onLockLayer:()=>{t.state.selectLock=!t.state.selectLock},onDeleteLayer:({action:r,value:p})=>{p.layerName=="all"?t.state.deleteLightbox=!0:t.layerControl({action:r,value:p})},onChangLayerVisible:r=>{t.layerControl(r)},onChangeOrderLayer:({action:r,value:p})=>{t.layerControl({action:r,value:p})},onLayerControl:({action:r,value:p})=>{t.layerControl({action:r,value:p})}}),null,16)])):I("",!0),M(H,z({dimensionMapStatus:t.state.toSearchDimensionStatus,currentLayers:t.state.currentLayers,mapCount:t.state.mapCount,openConditionWrap:()=>{t.state.conditionWrap=!t.state.conditionWrap,t.state.layerSelect=!1},openLayerSelect:()=>{t.state.layerSelect=!t.state.layerSelect,t.state.conditionWrap=!1},onLayerControl:({action:r,value:p})=>{t.layerControl({action:r,value:p})},onChangeMapCount:r=>{t.changeMapCount(r)},onChangeTarget:r=>{t.changeTarget(r)}},{onChangeDimensionMap:r=>{t.onChangeDimensionMap(r)},onConditionWrap:d[7]||(d[7]=r=>{t.conditionWrap(r)})}),null,16,["onChangeDimensionMap"])]),t.state.deleteLightbox?(L(),S("div",Wt,[c("div",Bt,[At,c("div",Ot,[c("button",{class:"rounded px-3 py-1 bg-steel text-white border-0",onClick:d[8]||(d[8]=()=>{t.layerControl({action:"selectLayerMode",value:{layerName:"all"}}),t.state.deleteLightbox=!1})},"確定 "),c("button",{class:"rounded px-3 py-1 bg-secondary bg-gradient text-white border-0",onClick:d[9]||(d[9]=()=>{t.state.deleteLightbox=!1})},"取消 ")])])])):I("",!0),c("div",{id:"popup",class:"popup position-absolute bottom-0",ref:r=>{t.state.popup.nodeRef=r}},[t.state.popup.popupId!==0?(L(),pe(F,{key:0,class:"areaData",closeAreaData:()=>{t.closeAreaData()},popup:t.state.popup,maxHeight:500},null,8,["closeAreaData","popup"])):I("",!0)],512),t.store.state.isInit?(L(),S("div",{key:1,class:"stepOverLayer position-absolute top-0 start-0 w-100 h-100 bg-black opacity-50",id:"firstEnter",onClick:d[10]||(d[10]=()=>{t.store.dispatch("updateLayerStatus",!1)})})):I("",!0)])}const zt=he(ht,[["render",Et]]);export{zt as default};
//# sourceMappingURL=WebMap-9777c0ac.js.map
