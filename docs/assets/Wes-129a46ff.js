import{V as be,g as he,T as _e,X as Ce,i as xe,S as Se,O as X,m as K,M as $,h as q,j as Ie,k as we,l as Ne,n as ke,f as Me,e as Te,d as De,c as ve,a as We,_ as Ae,o as Ee,p as Oe,q as Pe,F as Be,P as Ve,r as je,I as ze,s as Re,b as Fe}from"./logo-fc2a579b.js";import{$ as ee}from"./jquery-d4ea65ba.js";import{_ as qe,r as Ge,g as le,h as Ze,n as te,c as N,a as y,i as de,f as w,j as k,m as G,k as Je,l as Qe,q as ce,u as Ye,o as x}from"./index-6f6babe5.js";const He={props:{},setup(ae,{emit:p}){const u=K,a=Ye(),e=Ge({defaultCenter:[120.971859,24.801583],defaultCenterZoom:14,targetNum:1,conditionWrap:!1,layerSelect:!1,currentLayers:[],layers:[],mapLayers:le(()=>e.layers.map((t,r)=>({label:t.group_title,value:t.value,layers:t.group_layers,groupClass:t.group_class}))),selectLock:!1,mapCount:1,map1:null,map2:null,map1LayerStatus:[],map2LayerStatus:[],temp:{map1BaseStatus:0,map2BaseStatus:0},deleteLightbox:!1,dimensionMap:{map1:"2D",map2:"2D"},toSearchDimensionStatus:le(()=>{const n=e.targetNum===1?"map1":"map2";return e.dimensionMap[n]==="2D"}),selectValueTemp:0,popup:{nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""},comSize:{wrapHeight:"",wrapWidth:""},tribeQuery:{}});let m=null;Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0NzM3MWFhYS0xMjNlLTQ3MTMtODFjZS0xZjMzM2I5NGZiYTEiLCJpZCI6MTMwODE4LCJpYXQiOjE2ODQwNzM3Mjl9.UYu4kBialPo19dcvosHzZTpg2BD1zkFQnjCD78YiiYo";const A=new be({projection:"EPSG:4326",center:e.defaultCenter,zoom:e.defaultCenterZoom,minZoom:4,maxZoom:16});function Z(){e.map1=new $({target:"map1",layers:[q.getBaseMapData(0)],view:A,controls:[]}),e.map1.addControl(new Ee({units:"metric"})),V("3D"),ue()}function J(n,t){const r=new Oe({source:new Pe({features:[new Be({geometry:new Ve([n,t]),population:4e3,rainfall:500})]}),style:new je({image:new ze({anchor:[.5,100],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Re})})}),s=e.targetNum===1?"map1":"map2";e[s].addLayer(r)}function E({action:n,value:t}){var l;const r=((l=e.map1)==null?void 0:l.getTarget())==null?"map2":"map1",s=e[r].getView();switch(n){case"In":s.animate({zoom:s.getZoom()+1});break;case"Out":s.animate({zoom:s.getZoom()-1});break;case"toNorth":s.animate({rotation:0});break;case"moveTo":if(t){const{xAxis:c,yAxis:_}=t;s.animate({center:[c,_],zoom:17,duration:100})}else navigator.geolocation.getCurrentPosition(function(c){s.animate({center:[c.coords.longitude,c.coords.latitude],zoom:17,duration:100}),J(c.coords.longitude,c.coords.latitude)});break;case"fullScreen":const o=document.getElementById(`map${e.targetNum}`);o.requestFullscreen?o.requestFullscreen():o.msRequestFullscreen?o.msRequestFullscreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullscreen&&o.webkitRequestFullscreen();break}}function S({action:n,value:t}){var l,o,c,_,D,v,R,F,se;const r=e.targetNum==1?e.map1:e.map2,s=r==null?void 0:r.getLayers();switch(n){case"layerMode":if(t.checked){let g=t.nestedSubNodeIndex,W=e.layers[t.nodeIndex].group_layers[t.subNodeIndex].single_tiles,L=!xe(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].info_box);if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){if(!W||L){const b=m.getCesiumScene(),h=b.imageryLayers.length;for(let T=0;T<h;T++){let f=b.imageryLayers.get(T),I=(o=(l=f==null?void 0:f.imageryProvider._resource)==null?void 0:l.queryParameters)==null?void 0:o.id;const B=(c=u.getLayerIndex(I))==null?void 0:c.nodeIndex,U=(_=u.getLayerIndex(I))==null?void 0:_.subNodeIndex;t.nodeIndex==B&&t.subNodeIndex==U&&b.imageryLayers.remove(f)}g=e.selectValueTemp,t.id=u.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp)}const C=u.get3DLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);m.getCesiumScene().imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider(C))}else{(!W||L)&&(s.getArray().forEach(h=>{h.get("id")&&h.get("id").includes(`node${t.nodeIndex}_subNode${t.subNodeIndex}_nestedSubNode`)&&r.removeLayer(h)}),g=e.selectValueTemp,t.id=u.resetLayerId(t.id,"nestedSubNode",e.selectValueTemp));let C=u.getLayer(e.layers[t.nodeIndex].group_layers[t.subNodeIndex],g,t.id);if(r.addLayer(C),["雷達回波預測","累積雨量預測","氣溫預測"].includes(C.get("label"))){const{currentLayerKey:b,tilesImageUrls:h,imageExtent:T}=C.get("ext"),f=t.id.split("_nestedSubNode")[0];((D=e.temp)==null?void 0:D[`${f}count`])===void 0&&(e.temp[`${f}count`]=b),e.temp[f]=setInterval(function(){e.temp[`${f}count`]=e.temp[`${f}count`]+1>4?0:e.temp[`${f}count`]+1;let I=new Se({url:h[e.temp[`${f}count`]],projection:"EPSG:4326",imageExtent:T,interpolate:!0});C.setSource(I)},1e3)}["新竹縣原住民部落範圍","近年歷史災害82處部落點位","雨量站","工程鑽探","土石流潛勢溪流","落石分布"].includes(C.get("label"))&&(re(r,C.label),ne(t,C.get("label")))}oe("add",r.getTarget(),t.id)}else{if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){const{id:g,nestedSubNodeIndex:W,nodeIndex:L,subNodeIndex:C}=t;let b=e.layers[L].group_layers[C];const h=m.getCesiumScene(),T=h.imageryLayers.length;for(let f=0;f<T;f++){let I=h.imageryLayers.get(f);const B=(R=(v=I==null?void 0:I.imageryProvider._resource)==null?void 0:v.queryParameters)==null?void 0:R.id,U=(F=u.getLayerIndex(B))==null?void 0:F.nodeIndex,Le=(se=u.getLayerIndex(B))==null?void 0:se.subNodeIndex;(b.title===B||L==U&&C==Le)&&h.imageryLayers.remove(I)}}else{let W=function(){const L=t.id.split("_nestedSubNode")[0];g.filter(b=>{var h;return(h=b==null?void 0:b.get("id"))==null?void 0:h.includes(L)}).forEach(b=>{r.removeLayer(b)})},g=s.getArray();if(W(),e.layers[t.nodeIndex].group_layers[t.subNodeIndex].layer_type==="WFS"&&(ne(t),e.popup.popupId=0,e.popup.popupData="",e.popup.overlay&&(r.removeOverlay(e.popup.overlay),e.popup.overlay=null)),["雷達回波預測","累積雨量預測","氣溫預測"].includes(e.layers[t.nodeIndex].group_layers[t.subNodeIndex].title)){const L=t.id.split("_nestedSubNode")[0];clearInterval(e.temp[L]),delete e.temp[`${L}count`]}}oe("delete",r.getTarget(),t.id)}break;case"selectLayerMode":if(e.selectLock)return;t.layerName==="all"?s.getArray().filter(L=>L.get("id")!==void 0).forEach(L=>{S({action:"layerMode",value:{checked:!1,...u.getLayerIndex(L.get("id"))}})}):S({action:"layerMode",value:{checked:!1,...u.getLayerIndex(t.id)}});break;case"changeOrder":if(e.selectLock)return;const{nodeIndex:Q,subNodeIndex:Y,nestedSubNodeIndex:H}=u.getLayerIndex(t.id),ie=u.getLayer(e.layers[Q].group_layers[Y],H,t.id);if(t.movement==="up"){if(t.key+1===s.getArray().length)return;const g={checked:!1,nodeIndex:Q,subNodeIndex:Y,nestedSubNodeIndex:H,id:t.id};S({action:"layerMode",value:g}),s.insertAt(t.key+1,ie)}if(t.movement==="down"){if(t.key-1===0)return;const g={checked:!1,nodeIndex:Q,subNodeIndex:Y,nestedSubNodeIndex:H,id:t.id};S({action:"layerMode",value:g}),s.insertAt(t.key-1,ie)}break;case"baseMap":e.temp[`map${e.targetNum}BaseStatus`]=t.baseId;const ge=new _e({preload:1/0,name:t.name,label:t.label,type:t.mapType,baseId:t.baseId,source:new Ce({url:t.url}),crossOrigin:"anonymous"}),fe=r==null?void 0:r.getLayers().getArray();s.insertAt(0,ge),fe.forEach(g=>(g.get("type")==="base"&&g.get("baseId")!==t.baseId&&r.removeLayer(g),!0));break;case"setOpacity":P(t.key,t.value);break}M()}function M(){var n,t,r;if(e[`${e.targetNum==1?"map1":"map2"}LayerStatus`].includes("3D")){e.currentLayers=[];const s=m.getCesiumScene(),l=s.imageryLayers.length;for(let o=0;o<l;o++){let _=s.imageryLayers.get(o).imageryProvider;_ instanceof Cesium.WebMapServiceImageryProvider&&e.currentLayers.push({label:(n=_._resource)==null?void 0:n.queryParameters.layers_name,id:(t=_._resource)==null?void 0:t.queryParameters.id,visible:1})}}else{const s=e.targetNum==1?e.map1:e.map2,l=(r=s==null?void 0:s.getLayers())==null?void 0:r.getArray();e.currentLayers=l==null?void 0:l.map(o=>({label:o.get("label"),id:o.get("id"),visible:o.getVisible()}))}}function V(n){let t=e.targetNum==1?e.map1:e.map2,r=t==null?void 0:t.getLayers(),s=e.targetNum==1?"map1":"map2";if(e.dimensionMap[s]=n,n==="3D"){const o=r.getArray().find(c=>c.get("label").includes("近年歷史災害82處部落點位"));o&&e[`map${e.targetNum}`].removeLayer(o),O(!0),e[`${s}LayerStatus`].push("3D")}else O(!1),e[`${s}LayerStatus`]=e[`${s}LayerStatus`].filter(l=>l!=="3D"),e[`map${e.targetNum}LayerStatus`].forEach(l=>{let{nodeIndex:o,subNodeIndex:c,nestedSubNodeIndex:_}=u.getLayerIndex(l);return u.getLayer(e.layers[o].group_layers[c],_,n.id).get("label").includes("近年歷史災害82處部落點位")&&S({action:"layerMode",value:{checked:!0,nodeIndex:o,subNodeIndex:c,nestedSubNodeIndex:_,id:l}}),l})}function O(n){const t=e.targetNum==1?e.map1:e.map2;if(n){m=new X({map:t,time(){return Cesium.JulianDate.now()},sceneOptions:{mapProjection:new Cesium.WebMercatorProjection}}),m.setEnabled(!0);let r=m.getCesiumScene();r.terrainProvider=Cesium.createWorldTerrain({}),m.setEnabled(!0)}else m.setEnabled(!1)}function j(n){const t=e.targetNum==1?e.map1:e.map2,r=t==null?void 0:t.getLayers();if(e.selectLock)return;let s=!r.getArray()[n].getVisible();r.getArray()[n].setVisible(s),te(()=>{M()})}function P(n,t){let r=e.targetNum==1?e.map1:e.map2;(r==null?void 0:r.getLayers()).getArray()[n].setOpacity(Number(t))}function z(n){var l;if(e.mapCount===n)return;const t=e.targetNum!==1?"map1":"map2";e.mapCount=n;const s=e[`${t}LayerStatus`].filter(o=>o!=="3D").map(o=>K.getLayerIndex(o));if(n===2&&(e[t]=new $({target:t,layers:[q.getBaseMapData(0),...s.map(o=>u.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),((l=e[`${t}LayerStatus`])==null?void 0:l.indexOf("3D"))!==-1)){m=new X({map:e[t],time(){return Cesium.JulianDate.now()}}),m.setEnabled(!0);let o=m.getCesiumScene({});o.terrainProvider=Cesium.createWorldTerrain({})}if(n===1){e[t]=null;const o=document.getElementById(t);for(;o.firstChild;)o.removeChild(o.firstChild)}}function i(n){var r;e.targetNum=n;const t=e.targetNum!==1?"map1":"map2";if(e.mapCount===1){if(!e[`map${n}`]){let s=e[`map${n}LayerStatus`].filter(o=>o!=="3D");s.includes("node0_subNode4_nestedSubNodeundefined")&&(s=[...s.filter(c=>c!=="node0_subNode4_nestedSubNodeundefined"),"node0_subNode4_nestedSubNodeundefined"]);const l=s.map(o=>K.getLayerIndex(o));e[`map${n}`]=new $({target:`map${n}`,layers:[q.getBaseMapData(e.temp[`map${e.targetNum}BaseStatus`]),...l.map(o=>u.getLayer(e.layers[o.nodeIndex].group_layers[o.subNodeIndex],o.nestedSubNodeIndex,o.id))],view:A,controls:[]}),re(e[`map${n}`]),((r=e[`map${n}LayerStatus`])==null?void 0:r.indexOf("3D"))!==-1&&(m=new X({map:e[`map${n}`],time(){return Cesium.JulianDate.now()}}),m.setEnabled(!0))}if(e[t]){e[t]=null;const s=document.getElementById(t);for(;s.firstChild;)s.removeChild(s.firstChild)}}te(()=>{M()})}function d(){e.conditionWrap=!e.conditionWrap}function oe(n,t,r){if(n==="add")e[`${t}LayerStatus`].push(r);else if(n==="delete"){const s=e[`${t}LayerStatus`].findIndex(l=>l===r);e[`${t}LayerStatus`].splice(s,1)}else console.log("error")}function re(n){var r;const t=new Ie({layers:(r=n==null?void 0:n.getLayers())==null?void 0:r.getArray(),condition:we});n.addInteraction(t),t.on("select",s=>{const l=s.selected[0];if(l){e.popup.overlay=new Ne({element:e.popup.nodeRef,autoPan:!0,autoPanAnimation:{duration:250}}),e.popup.overlay.setPosition(s.mapBrowserEvent.coordinate),n.addOverlay(e.popup.overlay);const o=(l.getId()??l.getGeometryName()).split(".");if(e.popup.popupData=o[0],e.popup.coordinate=s.mapBrowserEvent.coordinate,o[0]==="新竹縣原住民部落範圍"){e.popup.popupId=l.get("編號");return}if(o[0]==="近年歷史災害82處部落點位"){e.popup.popupId=o[1];return}if(o[0]==="雨量站"){e.popup.popupId=l.get("Name");return}if(o[0]==="工程鑽探"){console.log("選到工程鑽探"),e.popup.popupId=l.get("name").split("_")[0];return}if(o[0]==="土石流潛勢溪流"){e.popup.popupId=l.get("ID"),e.popup.temp=l;return}o[0]==="落石分布"&&(e.popup.popupId=l.get("DATA_ID"),e.popup.temp=l)}else n.removeOverlay(e.popup.overlay),e.popup.overlay=null,e.popup={nodeRef:null,overlay:null,popupId:0,coordinate:[],popupData:""}})}function pe(){(e.targetNum===1?e.map1:e.map2).removeOverlay(e.popup.overlay),e.popup.overlay=null}function ne(n,t){const{checked:r,id:s}=n;if(!r){e.selectLayerOption={};return}t==="新竹縣原住民部落範圍"&&ee.ajax({url:"https://blueprint.indigenoustribe.tw/api/tribeQuery",method:"GET",success:l=>{e.tribeQuery=l},error:l=>{console.log(l)}})}function me(n){const t={action:"moveTo",value:{xAxis:n.WGS84.lng,yAxis:n.WGS84.lat}};E(t)}Ze(async()=>{let n=ee.ajax({url:"https://blueprint.indigenoustribe.tw/api/underLayers",method:"GET"}).done(r=>r),t=ee.ajax({url:"https://blueprint.indigenoustribe.tw/api/layers",method:"GET"}).done(r=>r);Promise.all([n,t]).then(r=>{let s=r[0].data.map((l,o)=>({mapType:"base",baseId:o,onCurrent:!1,...l}));q.setBaseMapData(s),e.temp.map1BaseStatus=0,e.temp.baseMapList=he(),e.layers=r[1].map((l,o)=>(l.group_layers.forEach((c,_)=>{let D=_,v;c.id=`node${o}_subNode${D}_nestedSubNode${v}`,c.single_tiles||c.tiles_list.forEach((R,F)=>{v=F,R.id=`node${o}_subNode${D}_nestedSubNode${v}`})}),{...l,value:o})),te(()=>{Z(),M()})}),e.comSize.wrapHeight=window.innerHeight,e.comSize.wrapWidth=window.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth),window.onresize=r=>{e.comSize.wrapHeight=r.target.innerHeight,e.comSize.wrapWidth=r.target.innerWidth,a.dispatch("updateWindowWidth",window.innerWidth)}});function ue(){m.getCesiumScene().imageryLayers.addImageryProvider(new Cesium.WebMapServiceImageryProvider({url:"https://dwgis1.ncdr.nat.gov.tw/server/services/MAP0627/Map2022FaultGeoSensitiveArea/MapServer/WMSServer",layers:"0",parameters:{FORMAT:"image/png",VERSION:"1.1.1",TRANSPARENT:"TRUE",SRS:"EPSG:4326"}}))}function ye(){window.console.log("ol3d",m);let n=m.getCesiumScene().imageryLayers,t=n.length;for(let r=0;r<t;r++){let s=n.get(r);window.console.log(1,s)}}return{state:e,props:ae,store:a,mapControl:E,layerControl:S,onChangeLayerVisible:j,onChangeLayerOpacity:P,changeTarget:i,conditionWrap:d,closeAreaData:pe,moveToMap:me,changeMapCount:z,onChangeDimensionMap:V,show:ye}}},Ue={class:"w-100 d-flex justify-content-between flex-sm-row flex-wrap flex-sm-nowrap mapWrap",id:"mapWrap"},Xe={key:0,class:"middleLine"},Ke={class:"SearchBar d-block d-sm-block position-fixed w-100 w-sm-auto position-sm-absolute p-3 p-sm-0"},$e={class:"d-flex align-items-center justify-content-between justify-content-sm-start"},et=y("img",{src:ke,alt:"",class:"logo col-5 col-sm-auto me-0 me-sm-5"},null,-1),tt={class:"conditionCom d-none d-sm-block position-absolute"},at={class:"mb-4"},ot={key:1,class:"mb-4"},rt={key:1},nt={class:"m-Navbar d-flex d-sm-none position-relative w-100"},st={class:"position-absolute bottom-100 w-100",style:{"max-height":"70vh","overflow-y":"scroll"}},it={key:0},lt={key:0,class:"lightWrap w-100 h-100 d-flex justify-content-center align-items-center"},dt={class:"p-4 rounded bg-white",style:{width:"250px"}},ct=y("p",{class:"text-center fw-bold"},"是否要取消全部圖層",-1),pt={class:"d-flex justify-content-around"};function mt(ae,p,u,a,e,m){var O,j,P,z;const A=Me,Z=Te,J=De,E=ve,S=Fe,M=We,V=Ae;return x(),N("div",null,[y("div",Ue,[y("div",{id:"map1",class:de({"w-100":((O=a.state.map1)==null?void 0:O.getTarget())=="map1","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(j=a.state.map1)==null?void 0:j.getTarget()})},null,2),a.state.mapCount===2?(x(),N("div",Xe)):w("",!0),y("div",{id:"map2",class:de({"w-100":((P=a.state.map2)==null?void 0:P.getTarget())=="map2","h-100":a.state.mapCount===1,"h-50":a.state.mapCount===2&&a.state.comSize.wrapWidth<600,middleMap:(z=a.state.map2)==null?void 0:z.getTarget()})},null,2)]),k(A,{class:"asideTool position-absolute top-50 translate-middle-y",id:"asideTool",onChangeTarget:i=>{a.changeTarget(i)},onOnMapControl:p[0]||(p[0]=({action:i,value:d})=>{a.mapControl({action:i,value:d})})},null,8,["onChangeTarget"]),y("div",Ke,[y("div",$e,[et,k(Z,{class:"mapSourceOption col-5 col-sm-auto d-block d-sm-block",baseMapList:a.state.temp.baseMapList,onChangeBaseMaps:({action:i,value:d})=>{a.layerControl({action:i,value:d})}},null,8,["baseMapList","onChangeBaseMaps"])]),k(J,G({class:"mt-4 d-none d-sm-block"},{dimensionMapStatus:a.state.toSearchDimensionStatus,currentLayers:a.state.currentLayers,mapCount:a.state.mapCount,onChangeBaseMaps:({action:i,value:d})=>{a.layerControl({action:i,value:d})},onChangeMapCount:i=>{a.changeMapCount(i)}},{onChangeTarget:i=>{a.changeTarget(i)},onOnLayerControl:p[1]||(p[1]=({action:i,value:d})=>{a.layerControl({action:i,value:d})}),onConditionWrap:p[2]||(p[2]=i=>{a.conditionWrap(i)}),onChangeDimensionMap:i=>{a.onChangeDimensionMap(i)}}),null,16,["onChangeTarget","onChangeDimensionMap"])]),y("div",tt,[y("div",at,[a.state.conditionWrap?w("",!0):(x(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:p[3]||(p[3]=i=>a.state.conditionWrap=!0)}," 圖層選項 ")),a.state.conditionWrap?(x(),N("div",ot,[k(E,G({tribeQuery:a.state.tribeQuery,mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:i=>{a.state.selectValueTemp=i},moveToMap:i=>{a.moveToMap(i)}},{onOnLayerControl:p[4]||(p[4]=({action:i,value:d})=>{a.layerControl({action:i,value:d})})}),null,16)])):w("",!0),k(S,{text:"可選擇要加入的圖層",styles:"right: 105%;top: 0;text-align: right;"})]),y("div",null,[a.state.layerSelect?w("",!0):(x(),N("button",{key:0,class:"border-0 w-100 rounded-4 bg-steel text-white text-center p-2 fw-bold fs-5",onClick:p[5]||(p[5]=i=>a.state.layerSelect=!0)}," 已選擇的圖層 ")),a.state.layerSelect?(x(),N("div",rt,[k(M,Je(Qe({selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:i,value:d})=>{d.layerName=="all"?a.state.deleteLightbox=!0:a.layerControl({action:i,value:d})},onLayerControl:({action:i,value:d})=>{a.layerControl({action:i,value:d})},onChangeLayerVisible:i=>{a.onChangeLayerVisible(i)},onChangeLayerOpacity:(i,d)=>{a.onChangeLayerOpacity(i,d)}})),null,16)])):w("",!0),k(S,{text:"顯示已經選擇的圖層",styles:"right: 105%;top: 0;text-align: right;"})])]),y("div",nt,[y("div",st,[a.state.conditionWrap?(x(),ce(E,G({key:0,class:"w-100"},{mapLayers:a.state.mapLayers,currentLayers:a.state.currentLayers,onClose:()=>{a.state.conditionWrap=!1},showSelectLayerValue:i=>{a.state.selectValueTemp=i}},{onOnLayerControl:p[6]||(p[6]=({action:i,value:d})=>{a.layerControl({action:i,value:d})})}),null,16)):w("",!0)]),a.state.layerSelect?(x(),N("div",it,[k(M,G({class:"position-absolute bottom-100 w-100"},{selectLock:a.state.selectLock,currentLayers:a.state.currentLayers,onClose:()=>{a.state.layerSelect=!1},onLockLayer:()=>{a.state.selectLock=!a.state.selectLock},onDeleteLayer:({action:i,value:d})=>{d.layerName=="all"?a.state.deleteLightbox=!0:a.layerControl({action:i,value:d})},onChangLayerVisible:i=>{a.layerControl(i)},onChangeOrderLayer:({action:i,value:d})=>{a.layerControl({action:i,value:d})},onLayerControl:({action:i,value:d})=>{a.layerControl({action:i,value:d})}}),null,16)])):w("",!0)]),a.state.deleteLightbox?(x(),N("div",lt,[y("div",dt,[ct,y("div",pt,[y("button",{class:"rounded px-3 py-1 bg-steel text-white border-0",onClick:p[7]||(p[7]=()=>{a.layerControl({action:"selectLayerMode",value:{layerName:"all"}}),a.state.deleteLightbox=!1})},"確定"),y("button",{class:"rounded px-3 py-1 bg-secondary bg-gradient text-white border-0",onClick:p[8]||(p[8]=()=>{a.state.deleteLightbox=!1})},"取消")])])])):w("",!0),y("div",{id:"popup",class:"popup position-absolute bottom-0",ref:i=>{a.state.popup.nodeRef=i}},[a.state.popup.popupId!==0?(x(),ce(V,{key:0,class:"areaData",closeAreaData:()=>{a.closeAreaData()},popup:a.state.popup,maxHeight:500},null,8,["closeAreaData","popup"])):w("",!0)],512)])}const ft=qe(He,[["render",mt]]);export{ft as default};
//# sourceMappingURL=Wes-129a46ff.js.map
